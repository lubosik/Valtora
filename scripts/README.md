# Scripts Directory

This directory contains utility scripts for automation and maintenance tasks.

## Keyword Research Script

### `keyword-research-dataforseo.ts`

Automates keyword research using the DataForSEO API.

### Setup

1. **Get DataForSEO API Credentials:**
   - Sign up at [DataForSEO](https://dataforseo.com/)
   - Navigate to API Dashboard
   - Get your API login (username) and API password
   - Note: These are different from your account login credentials

2. **Configure Environment Variables:**
   - Copy `.env.example` to `.env.local` (if not already done)
   - Add your DataForSEO credentials:
     ```env
     DATAFORSEO_USERNAME=your_api_login
     DATAFORSEO_PASSWORD=your_api_password
     ```
   - **Note:** If you only have an API key, check your DataForSEO dashboard:
     - The API login (username) is usually your account email or a specific API identifier
     - The API password is a separate password generated by DataForSEO
     - These are different from your account login credentials
     - If unsure, contact DataForSEO support or check their API documentation

3. **Install Dependencies (if needed):**
   - The script uses Node.js built-in modules
   - No additional npm packages required
   - Requires Node.js 18+ with fetch API support

### Usage

Run the script using `tsx` (TypeScript execution):

```bash
npx tsx scripts/keyword-research-dataforseo.ts
```

Or add to `package.json` scripts:

```json
{
  "scripts": {
    "keyword-research": "tsx scripts/keyword-research-dataforseo.ts"
  }
}
```

Then run:

```bash
npm run keyword-research
```

### How It Works

1. **Loads Credentials:** Reads `DATAFORSEO_USERNAME` and `DATAFORSEO_PASSWORD` from `.env.local`

2. **Posts Research Tasks:** Sends seed keywords to DataForSEO API
   - Default seed keywords focus on Dubai company formation
   - Can be modified in the script's `seedKeywords` array

3. **Retrieves Results:** Fetches keyword data including:
   - Search volume
   - CPC estimates
   - Competition/difficulty scores
   - Monthly search trends

4. **Processes Data:**
   - Filters keywords below 30 monthly searches (threshold)
   - Classifies intent (transactional, commercial, informational)
   - Determines match type (exact, phrase, long-tail)
   - Generates target page slugs

5. **Outputs CSV:** Writes results to `seo/keyword-research-dataforseo-output.csv`

### Output Format

The script generates a CSV file with the following columns:

- `keyword` - The keyword phrase
- `intent_type` - Classified intent (transactional/commercial/informational)
- `volume` - Monthly search volume
- `cpc_estimate` - Cost per click estimate (if available)
- `difficulty` - Competition score (if available)
- `chosen_match_type` - Recommended match type
- `target_page` - Suggested blog post slug
- `notes` - Auto-generated notes

### Next Steps

After running the script:

1. **Review Output:** Open `seo/keyword-research-dataforseo-output.csv`
2. **Merge Results:** Copy relevant keywords to `seo/keyword-research.csv`
3. **Refine Data:**
   - Review and adjust `intent_type` classifications
   - Update `target_page` slugs as needed
   - Add custom `notes` for content planning
4. **Plan Content:** Use the CSV to prioritize blog post creation

### Customization

**Change Seed Keywords:**

Edit the `seedKeywords` array in the script:

```typescript
const seedKeywords = [
  'your custom keyword',
  'another keyword',
  // ...
]
```

**Adjust Volume Threshold:**

Change the minimum volume filter:

```typescript
if (volume < 30) {  // Change 30 to your desired threshold
  continue
}
```

**Modify Location/Language:**

Update the API request parameters:

```typescript
location_code: 2840, // United Arab Emirates (change as needed)
language_code: 'en', // English (change as needed)
```

### API Costs

- DataForSEO charges per API call
- Check your account balance before running large batches
- The script processes 10 seed keywords by default
- Each seed keyword may return multiple related keywords

### Troubleshooting

**Error: "Credentials not found"**
- Ensure `.env.local` exists in project root
- Verify `DATAFORSEO_USERNAME` and `DATAFORSEO_PASSWORD` are set
- Check for typos in variable names

**Error: "API error: Invalid credentials"**
- Verify your API login and password are correct
- Ensure you're using API credentials, not account login
- Check your DataForSEO account has API access enabled

**Error: "No keyword results found"**
- Check your DataForSEO account balance
- Verify seed keywords are valid
- Try with fewer seed keywords
- Check API response for error messages

**Script runs but produces empty results:**
- Keywords may be below volume threshold (30)
- Adjust threshold or review API response
- Check if seed keywords are too niche

### Support

For DataForSEO API issues:
- Documentation: https://docs.dataforseo.com/
- Support: Contact DataForSEO support

For script issues:
- Check script error messages
- Review DataForSEO API documentation
- Verify environment setup
